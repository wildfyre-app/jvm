stages:
  - test
  - documentation

variables:
  GIT_SUBMODULE_STRATEGY: recursive

cache:
  paths:
    - .gradle

junit:
  stage: test
  image: clovisai/java-python:latest # The image created in src/test/Dockerfile
  before_script:
    - ./api.sh
  script:
    - ./gradlew test
  cache:
    paths:
      - .gradle
      - .cache/pip/wheels

static-analysis:
  stage: test
  image: java:latest
  script:
    - ./gradlew check

dokka:
  stage: documentation
  image: java:latest
  script:
    - ./gradlew dokka
